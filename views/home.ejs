<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>Blog project - Home</title>
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
	</head>
	<body>
		<div class="container-fluid">
			<div class="row">
				
				<div class="col-9">
					<h1 id="top">Blogposts</h1>
					<hr>
					<% for(const x of data) {%>
						<h1><%= x.title%></h1>
						<p><%= x.text %></p> <!--slice the text -->
						<form method="post" action="/blogPost">
							
							<% if(login !== null) { %>
						
							<input type="text" name="username" hidden value="<%= name %>">
							
							<% }%>
							<input type="text" name="id" hidden value="<%= x._id %>">
							<button type="submit" class="btn-sm btn-link">continue reading</button>
						</form>
						
					<% }%>
					<hr>
					<!-- <h2>Blogpost 1 title</h2>
					<p id="lorem">"Lorem ipsum dolor sit amet, consectetur adipiscing elit, 
					sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. 
					Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris 
					nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in 
					reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla
					pariatur. Excepteur sint occaecat cupidatat non proident, sunt in 
					culpa qui officia deserunt mollit anim id est laborum."</p>
					<a href="">Continute reading</a>
					<h2>Blogpost 2 title</h2>
					<p id="lorem">"Lorem ipsum dolor sit amet, consectetur adipiscing elit, 
					sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. 
					Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris 
					nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in 
					reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla
					pariatur. Excepteur sint occaecat cupidatat non proident, sunt in 
					culpa qui officia deserunt mollit anim id est laborum."</p>
					<a href="">Continute reading</a>
					<h2>Blogpost 3 title</h2>
					<p id="lorem">"Lorem ipsum dolor sit amet, consectetur adipiscing elit, 
					sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. 
					Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris 
					nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in 
					reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla
					pariatur. Excepteur sint occaecat cupidatat non proident, sunt in 
					culpa qui officia deserunt mollit anim id est laborum."</p>
					<a href="">Continute reading</a>
				-->
				</div>
				
				<div class="col-3">
					
					<% if(login == null) { %>
					
					<!-- user not logged in -->
					
					<form method="post" action="login">
						<button type="submit"class="btn-lg btn-link">Login!</button>
					</form>
					
					<form method="post" action="create">
						<button type="submit"class="btn-lg btn-link">Create new blogpost!</button>
					</form>
					
					
					
					<% } else { %>
					
					<!-- user logged in -->
					
					<h1>Hello <%= name %>!</h1>
					<form method="post" action="create">
						<input type="text" name="username" hidden value="<%= name %>">
						<button type="submit"class="btn-lg btn-link">Create new blogpost!</button>
					</form>
					
					<% if(!viewingMyPosts) { %>
					
					<form method="post" action="viewPostsByUser">
						<input type="text" name="username" hidden value="<%= name %>">
						<button type="submit"class="btn-lg btn-link">View your posts!</button>
					</form>
					
					<% } else { %>
					
					<form method="post" action="/viewAllPosts">
						<input type="text" name="username" hidden value="<%= name %>">
						<button type="submit"class="btn-lg btn-link">View all posts!</button>
					</form>
					
					<% } %>
					
					<form method="post" action="/">
						<button type="submit"class="btn-lg btn-link">Logout!</button>
					</form>
					<% } %>
				
					
					
					
				</div>
			</div>
			<a href="#top" style="position:fixed; bottom: 0; right: 0"><button class="btn-lg btn-link">TOP</button></a>
		</div>
	</body>
</html>